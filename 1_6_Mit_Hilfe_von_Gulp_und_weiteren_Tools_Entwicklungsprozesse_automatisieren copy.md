# Mit Hilfe von Gulp und weiteren Tools Entwicklungsprozesse automatisieren

In diesem Kurs stelle ich Ihnen einen Entwicklungs-Workflow vor, der eine Reihe von Befehlszeilen-Tools verwendet, um Dinge wie CSS aus SAS-Dateien zu kompilieren, Bilder zu komprimieren und zu optimieren, den Browser mit dem aktuellsten Code zu aktualisieren und sogar über andere Geräte im Netzwerk auf die aktuelle Entwicklungsseite zuzugreifen, wie z. B. Smartphones. All dies wird mit dem Gulp Task Runner und einem Skript verwaltet, das Sie in den Übungsdateien für diesen Film finden. Ich habe ein Skript erstellt, damit du es für dieses Thema im Kurs verwenden und es dann modifizieren kannst, um es mit jedem anderen Thema zu arbeiten, das du in der Zukunft baust.

Ich begleite Sie durch das Setup. Damit all dies funktioniert, müssen Sie Gulp, Node und NPM auf Ihrem Computer installiert und ausgeführt haben. Sie finden alle Informationen, die Sie auf den Websites für jeden dieser Dienste benötigen, und wenn Sie es auf Ihrem Computer installieren möchten, können Sie Ray Villalobos' Kurs Up and Running with NPM, den Node Package Manager, ausprobieren. In den Übungsdateien für diesen Film, 01 06, befindet sich ein einzelner Ordner namens gulp dev. Öffnen Sie Ihre WordPress-Site, lokal auf unserem Computer, gehen Sie zu wp Inhalt, Themen, und kopieren Sie dann gulp dev in seiner Gesamtheit in den Themen-Ordner.

Sie möchten, dass gulp dev neben all den anderen Ordnern mit aktuellen Themen sitzt, so können wir es unabhängig von dem aktuellen Thema machen, an dem Sie gerade arbeiten. Jetzt müssen wir den Gulp-Prozess so konfigurieren, dass er mit Ihrem Projekt zusammenarbeitet, und das tun wir vom Code-Editor aus. Also hier gehe ich zu wp Inhalt, Themen und gulp dev, und zuerst werde ich öffnen Verpackung. json. Dies ist die Konfigurationsdatei, mit der NPM versteht, worum es bei diesem Projekt geht. Und hier können Sie einige der Einstellungen ändern, wenn Sie möchten. Ganz oben sehen Sie, dass wir den Namen des Projektes haben, humescores, Sie ändern ihn in den Namen Ihres Projektes.

Sie können eine Versionsnummer, eine Beschreibung, Hauptpunkte an der Hauptdatei für das Projekt angeben, also setze ich es einfach auf index. php, und Sie können auch ein Testskript einrichten, wenn Sie möchten, obwohl wir gerade nichts haben. Wenn Sie zum Repository hinuntergehen, müssen Sie das Repository, das Sie verwenden, einrichten, wenn Sie ein separates Repository verwenden, entweder auf GitHub oder Bitbucket oder irgendwo anders, also würde das auf Ihr Repository zeigen, nicht auf meins. Sie sehen im Moment, dass es auf das Repository für diesen Kurs zeigt. Weiter unten haben Sie den Autor, hier haben Sie Ihren eigenen Namen, denn ich bin mir sicher, dass Sie nicht ich sind.

Und dann unter Bugs und Homepage die richtigen URLs für die Adresse, wo Sie wollen, dass Leute Bugs für Ihr Projekt melden und auch wo Sie wollen, dass Leute hingehen, wenn sie Ihr Projekt sehen wollen. Nun ist einiges von diesem Zeug nur dann wirklich nötig, wenn du den Code an andere Leute versenden willst, also wenn du nicht glaubst, dass es für dein Projekt notwendig ist, kannst du einfach Homepage und Bugs und Repository entfernen, aber für Projekte, die du online stellen willst, ist es eine gute Idee, sie an Ort und Stelle zu halten. Sobald Sie diese Änderungen vorgenommen haben, scrollen Sie nach unten und werfen Sie einen Blick auf die devDependencies. Jetzt im Moment verwendet der Gulp-Prozess all diese verschiedenen Werkzeuge, um verschiedene Dinge zu tun.

Hier haben wir also eine Liste aller Abhängigkeiten, die in Ihrem Projekt installiert werden müssen, damit alles funktioniert. Das bedeutet, sobald Sie mit diesem Setup und dem Paket JSON fertig sind, werden wir das Installationsprogramm starten und alle diese Dinge auf einmal installieren. Dazu müssen Sie Ihre Kommandozeilen-Tools öffnen. Und unter Windows tun Sie das, indem Sie die Windows-Taste drücken und C-M-D eingeben, was Ihnen die Eingabeaufforderung gibt. Wenn Sie sich auf einem Mac befinden, halten Sie Befehl und Leertaste gedrückt, um den Finder zu öffnen, und geben Sie dann Terminal ein und drücken Sie die Eingabetaste. Wenn die gleichen Dinge passieren, gelangen Sie zu einer Eingabeaufforderung.

Navigieren Sie von hier aus zu dem Ordner, der Ihr Gulp-Projekt enthält. Also in meinem Fall, dass wäre cd-Dokumente/ und dann Sites, dann haben wir humescores, das ist der Ordner, der alle von WordPress, wp Inhalt, Themen, und dann schließlich, gulp-dev enthält. Innerhalb von gulp dev möchte ich nun ein NPM-Installationsprogramm ausführen, um alle Abhängigkeiten zu installieren, die in package. json angegeben sind. Also gebe ich einfach npm install ein und das Installationsprogramm beginnt seine Arbeit.

Jetzt wird dieser Prozess ziemlich lange dauern, also lassen wir das einfach im Hintergrund laufen und arbeiten dann weiter an unseren Dateien. Dies kann so lange dauern, dass Sie eine Pause einlegen, eine Tasse Kaffee trinken oder tun können, was immer Sie wollen, und dann wieder kommen, wenn es fertig ist. Zurück in meiner IDE sehen Sie, dass ein neuer Ordner unter gulp dev namens node modules angelegt wurde. Und unter diesem Ordner werden alle Module heruntergeladen. Hier sehen Sie, dass sich die Liste zu entwickeln beginnt. Wir ignorieren einfach den Ordner für Knotenmodule, weil das alles automatisch von Node verwaltet wird, also schauen wir uns stattdessen Gulpfile js an.

Dies ist der Ordner, in dem das aktuelle Projekt verwaltet wird, und hier müssen Sie eventuell Änderungen vornehmen, wenn Sie in ein neues Projekt umziehen. Gulp dev lebt außerhalb eines der Themen, und das bedeutet, dass Sie es an ein beliebiges Thema ankoppeln können, wenn Sie mit ihm arbeiten möchten. Und das tun Sie, indem Sie Gulpfile. js öffnen und die erste Variable, den Menünamen, auf den Namen des Ordners zeigen, der das gewünschte Thema enthält. In meinem Fall heißt das Thema humescores und der Ordnername humescores, daher wird themenname auf humescores gesetzt.

Als nächstes haben wir ein Setup, das alle verschiedenen Tools aufruft, die wir verwenden werden, und ein paar andere Variablen aufruft. Dann haben wir eine Reihe von verschiedenen Aufgaben, die Gulp erfüllen kann. Zuerst haben wir eine CSS-Aufgabe, die jede der scss (Mumbling) Sass-Dateien im scss-Ordner aufgreift, Sourcemaps für sie generiert und dann den Sass-Kompilierungsprozess ausführt, um eine erweiterte Version von scss zu erstellen, die Tabulatoren mit einem Einrückungseinzug mit einer 1 enthält, und wenn es irgendwelche Fehler gibt, werden sie in der Befehlszeile protokolliert.

Und dann führen wir postcss autoprefixer auf ihm danach aus, um alle Inhalte, die auf älteren Browsern funktionieren müssen, automatisch zu reparieren. Schließlich schreiben wir eine Sourcemap in unser Projekt und platzieren dann eine CSS-Datei im Wurzelbereich des Projekts, so erhalten wir eine CSS-Datei, die mit der WordPress-Seite funktioniert. Als nächstes haben wir ein Bildoptimierungswerkzeug, das zum Ordner images geht, den Ordner RAW und alle Bilder in diesem Ordner sucht, prüft, ob diese Dateien neu sind oder ob sie die gleichen sind, die vorher vorhanden waren.

Das bedeutet, dass Sie jederzeit große Bilder hinzufügen möchten und diese einfach in einem Ordner namens images/RAW ablegen und diese Bilder automatisch optimiert und in den Bildordner im Endprodukt eingefügt werden. Als nächstes haben wir eine JavaScript-Aufgabe. Dieses greift den Javascript-Folder und sucht nach einer js-Datei innerhalb des Javascript-Ordners, führt dann die jshint auf sie, um sicherzustellen, dass es keine Fehler gibt, sagt Ihnen, wenn es Fehler gibt, und legt dann die JavaScript-Dateien wieder in den Javascript-Ordner. Später, wenn Sie vielleicht JavaScript-Dateien oder ähnliches komprimieren möchten, würden Sie diese Funktionalität in diese JavaScript-Aufgabe einhängen.

Endlich haben wir die Uhrenaufgabe. Nun ist dies die Aufgabe, die sitzt und überwacht unsere gesamte WordPress Thema Projekt für alle Änderungen in der CSS-Dateien, in diesem Fall führen wir die css-Task, JavaScript-Dateien, um die Javascript-Aufgabe, Bilddateien, in diesem Fall führen wir die Bilder, und schließlich, Änderungen an einer Datei, die BrowserSync auslöst. Jetzt ist browserSync ein wirklich nützliches Tool, es synchronisiert den Browser buchstäblich mit Ihrer aktuellen Entwicklungsumgebung und ermöglicht Ihnen auch den Zugriff auf diese Entwicklungsumgebung von einem Browser aus, der sich auf einem anderen Gerät im lokalen Netzwerk befindet.

Sie werden sehen, wie es funktioniert. Damit browserSync korrekt funktioniert, müssen Sie eine Konfigurationseinstellung vornehmen. Sie werden sich daran erinnern, dass ich in meinem lokalen Host-Setup den Domänennamen humescores. dev benutze, um Zugriff auf den Inhalt zu erhalten, weil ich (murmeln) und einen virtuellen Server verwende, um das zu ermöglichen. Damit all dies funktioniert, gehen Sie zu dem Browser auf Ihrem Computer und besuchen Sie die Website, kopieren Sie dann die URL zu diesem Browser und platzieren Sie sie in dieser Proxy-Variable. Auf diese Weise kann browserSync auf diese URL zeigen und die Seite von dieser URL aus starten.

Schließlich haben wir ganz unten eine Standardaufgabe, die Watch ausführt. Und watch löst browserSync aus und sucht dann nach allen Dateien. Wie ich schon sagte, das einzige, was Sie ändern müssen, wenn Sie zu einem anderen Projekt wechseln möchten, ist ganz oben den Namen des Theme-Ordners und ganz unten diese Proxy-URL auf die URL der aktuellen Live-Version der Website ändern, an der Sie gerade arbeiten. Sobald Sie mit dem Kurs fertig sind, können Sie auch alle Aufgaben ändern oder neue Aufgaben hinzufügen, um die Funktionen in diesem Gulp-Prozess zu verbessern, aber für unseren Kurs wird das, was wir jetzt haben, perfekt funktionieren.

Lassen Sie uns also sehen, wie das in der Praxis funktioniert. Ich lösche meine Befehlszeile, und dann um den Prozess zu starten, BrowserSync auszuführen und alles andere zum Funktionieren zu bringen, gebe ich den Befehl gulp aus. Nun läuft der Watch-Task, der browserSync anstößt und browserSync öffnet dann meine Seite in meinem Browser. Also hier seht ihr die Seite, sie läuft nur noch unter einer bestimmten IP-URL und das bedeutet, dass ich jetzt das, was ihr im Browser seht, mit meinem Entwicklungsprojekt synchronisiere. Und jedes Mal, wenn ich Änderungen an den Theme-Dateien vornehme, wird dieser Browser automatisch aktualisiert.

Aber das ist nicht alles. Wenn ich das Fenster hier verkleinere, kopieren Sie diese URL und öffnen Sie dann einen anderen Browser, sagen wir Firefox, und fügen Sie dann die URL ein, die Sie sehen werden, dass wir die gleiche Seite haben. Wenn ich nun aber eine Änderung an der linken Seite hier in Chrome vornehme, wird sie mit dem anderen Browser synchronisiert. Und das passiert nicht nur auf meinem Computer. Wenn ich die gleiche Seite auf einem Smartphone im lokalen Netz öffne und zur korrekten URL gehe, die in der Befehlszeile hier, 192,168,1,130,8080 aufgeführt ist.

Dies hängt nun von Ihrem Computer und Ihrer Netzwerkinstallation ab. Ich kann auf die lokal auf diesem Computer laufende Seite zugreifen und den Inhalt auf die gleiche Weise manipulieren. Das bedeutet, wenn ich die Seite auf meinem Handy scrolle, sehen Sie die Seiten auch auf dem Desktop. Dafür ist browserSync da und das macht es so mächtig. Jetzt zusätzlich, jedes Mal, wenn ich eine Änderung an CSS oder JavaScript oder Bilder oder etwas anderes machen, werden Sie die Befehlszeile aktualisieren mit Informationen zu sehen und jederzeit gibt es einen Fehler in JavaScript erhalten Sie eine Benachrichtigung über das, was falsch ist, jedes Mal, wenn es einen Fehler in Ihrem CSS erhalten Sie eine Benachrichtigung, was falsch ist, und der gesamte Prozess ist vollständig automatisiert.

So funktioniert nun einmal alles und jetzt wissen wir, dass es richtig funktioniert. Während wir uns im Kurs vorwärts bewegen, wirst du sehen, wie ich diese Werkzeuge benutze, ich werde mich immer wieder darauf beziehen, und du wirst dich daran gewöhnen, wie alles zusammenarbeitet, und wir werden Fehlerberichte, Kompilierungen und all die anderen Dinge sehen, die wichtig sind. Aber jetzt stellen Sie sicher, dass es funktioniert, stellen Sie sicher, dass Sie auf den Inhalt in Ihrem Browser zugreifen können, und dann sind wir bereit, loszulegen.