# JavaScript anpassen, damit es mit dem aktuellen Theme funktioniert

Dieses ist diese Zeit, als Sie sagen, dass, whoa, whoa, whoa, whoa, Morton, Sie kann nicht mir gerade erklären, Code von einem Thema zu kopieren und es in ein anderes Thema zu werfen und mit ihm dann getan zu werden gehen. Ich stimme zu. Lasst uns also Stück für Stück durch diesen Code gehen und sehen, was genau vor sich geht, damit ihr versteht, wie er funktioniert, und da wir uns den Code ansehen, können wir ihn auch ein paar Änderungen vornehmen, damit er auch für unser Thema funktioniert. In Ordnung, scrollen wir runter zu Zeile 14. Hier beginnt das Fleisch der Funktionen. Hier haben wir eine Variable namens dropdownToggle eingerichtet, die eine Schaltfläche enthält.

Der Button hat die Klasse, dropdown-toggle, hat das aria-expanded Attribut auf false gesetzt, und innerhalb von dropdownToggle hängen wir zwei Dinge an. Zuerst etwas namens humescoresScreenScreenReaderText. icon. Nun, das ist ein Überbleibsel aus dem 2017-Thema, wir haben diese Variable nicht, so dass wir diese für etwas anderes tauschen werden, und dann fügen wir eine Spanne mit einer Klasse von Screen-Reader-Text, was bedeutet, dass der Text innerhalb dieser Spanne versteckt wird, und Text, der innerhalb dieser Spanne geht, ist etwas Vertrautes, humscoresScreenReaderText. expandieren.

Sie werden sich aus dem vorherigen Film erinnern, der Inhalt von humscoresScreenReaderText. expand ist der Text Expand Child Menu. Diese Variable, dropdownToggle, enthält also eine Schaltfläche mit dem Dropdown-Toggle der Klasse, aria-expanded auf false gesetzt, momentan irgendeine Art von Icon-Ding, das nicht funktioniert, und dann eine Spanne mit dem Screen-Reader-Text der Klasse und dem Text Expand Child Menu. Da wir dieses Icon nicht haben, habe ich es durch ein Symbol ersetzt, sagen wir mal ein Plus-Symbol, also kopiere ich diese Zeile hier in ihrer Gesamtheit, füge es anstelle der Append-Icon-Komponente ein und sage dann, ich will überspannen.

Diesmal wird die Klasse ein Dropdown-Symbol sein, und der Text wird nur ein Plus-Symbol sein. Um fertig zu werden, nehmen Sie das Semikolon am Ende weg, speichern Sie das, gehen Sie zurück zum Browser, und jetzt sehen Sie die Schaltfläche enthält ein kleines Plus-Symbol. Und wenn wir den Code im Inspektor öffnen, sehen Sie, dass dieser Button zwei Bereiche hat, einen mit einem Dropdown-Symbol der Klasse, das das Plus enthält, und einen mit dem Klassen-Bildschirmlesetext, der Expand Child Menu enthält. Sie werden sehen, warum ich das Pluszeichen in dieser Spanne mit einer Klasse eingepackt habe.

Alles klar, so weit so gut. Aber wie wird dieser Button nur an die Menüeinträge angehängt, die tatsächlich Dropdown-Menüs haben? Nun, das ist in der nächsten Zeile erledigt. Hier verwenden wir die jQuery-Funktion container. find, um die spezifische Art des Containers zu finden. In diesem Fall suchen wir nach jedem Container, der die Klasse menu-item-has-children hat, und einem Anker darin, oder nach jedem Element, das die Klasse page_item_has_children und den Anker darin hat. Wenn wir einen dieser Elemente finden, fügen wir den Dropdown-Schalter direkt nach diesem Element an.

Wenn wir uns also das enthaltene Element hier anschauen, sehen Sie, dass dieses Listenelement die Klasse page_item_has_children passiert hat, und innerhalb des Listenelements haben wir einen Anker, und nach diesem Anker fügt das Skript den Button mit all diesem Inhalt hinzu. Die nächsten drei Zeilen hier sollen Schaltflächen und Beschwörungselemente mit aktiven Kindermenüs einschalten, so dass sich das Untermenü vergrößern sollte, wenn Sie zu einer Seite wechseln, die in einem Untermenü verlinkt ist. Das ist nicht nötig, wir brauchen es nicht für unser Thema, also werde ich es einfach herausnehmen und dann schauen wir uns stattdessen die nächste Funktionalität an.

Dies ist also die Funktionalität, mit der das Menü ein- und ausgeschaltet werden kann. Hier haben wir wieder die gleiche jQuery-Funktion benutzt, container. find, nur diesmal suchen wir nach dem Dropdown-Toggle. Auf der Dropdown-Schaltfläche befindet sich der Button, den wir gerade zu den Menüs hinzugefügt haben. Immer wenn wir einen Dropdown-Schalter finden und darauf geklickt wird, machen wir eine Menge Sachen. Also zuerst bekommen wir den aktuellen Eintrag, das ist der Dropdown-Toggle, und wir finden den Screen-Reader-Text darin. Dann nehmen wir den Text des Bildschirmlesers Spanne, so dass der Artikel mit Screen-Reader-Text, und verwenden Sie einige ternäre Logik zu sagen, wenn der Text ist derzeit auf gleich humscoresScreenReaderText. expandieren, das bedeutet, dass der Text sagt Expand Child Menu.

Ändern Sie es dann in humscoresScreenReaderText. collapse, was Kind-Menü komprimieren heißt. Wenn nicht, so ändern Sie es wieder auf Expandieren zurück, wenn es bereits Kollabieren heißt. Dann machen wir dasselbe noch mal. Wir finden die nächsten Kinder oder das nächste Untermenü und toggeln die Klasse toggled-on, so dass das Menü erscheint, und wir finden das Attribut Aria-expanded und ändern es entweder in True oder False, je nachdem, was es gerade ist. Schließlich greifen wir uns das Element selbst und fügen es mit dem Toggle-on an.

Um dies sinnvoller zu machen, schauen wir uns das Element noch einmal im Browser an und klicken auf den Button. Also ist der Knopf gerade jetzt nicht angeklickt. Sie können sehen, dass die Schaltfläche hier mit dem Dropdown-Toggle der Klasse Aria-expanded auf false gesetzt ist, das Dropdown-Symbol ist ein Plus, der Text im Bildschirmleser sagt Expand Child Menu, und das darunterliegende UL, so dass das Dropdown-Element mit der Klasse Children nicht angezeigt wird. Wenn ich dann auf den Button klicke, ändern sich ein paar Dinge. Nun wird der Button selbst in die Klasse toggled-on umgeschaltet. Aria-expanded ist auf True eingestellt.

Der Text für den Bildschirmleser wird in Kind-Menü komprimieren geändert, und am wichtigsten ist, dass die UL mit den Klassenkindern eine neue Klasse namens toggled-on hat, und diese Klasse ändert die Einstellung von der Anzeige von keinen auf Block anzeigen und zeigt das Dropdown-Menü an. Klicken Sie erneut auf die Schaltfläche, alles ändert sich wieder, so dass der Dropdown-Toggle jetzt nur noch ein Dropdown-Toggle ist, Aria-expanded falsch ist, der Text im Bildschirmleser sagt Expand Child Menu, und das UL unten ist wieder ausgeblendet. Ich möchte hier noch eine Änderung an diesem Button vornehmen. Ich möchte, dass es ein Minus-Symbol anzeigt, wenn es geöffnet ist, so dass Sie deutlich darauf hingewiesen haben, dass Sie es einklappen möchten.

Um das zu tun, benutze ich die gleiche Logik, die wir hier unten sehen, also werde ich zuerst den Gegenstand finden. Ihr könnt hier sehen, wir benutzen _this. find um Screen-Reader-Text zu finden. Das bedeutet, dass ich eine andere Variable einrichten kann, sie dropdownSymbol aufrufe, und ich setze sie auf _this. find, und ich suche nach. dropdown-Symbol. Dieses Dropdown-Symbol enthält jetzt das Plus-Zeichen, das wir kurz zuvor definiert haben, dann verwende ich dieselbe ternäre Logik, die Sie hier unten sehen, also sage ich dropdownSymbol, ich will den Text drinnen, und ich verwende ternäre Logik auf diesem Text.

Ich sage dropdownSymbol. text triple entspricht entweder minus oder plus oder minus. Genau wie die Logik unten, sagen wir also, wenn der Text des DropdownSymbols gerade minus ist, dann setzen Sie ihn auf plus. Wenn es schon Plus ist, dann stell es wieder auf Minus. Speichern Sie dies, laden Sie die Seite neu und prüfen Sie, ob es funktioniert. Ich klicke den Plus-Knopf, wechselt zu Minus. Klicken Sie auf die Minus-Schaltfläche, wechselt zurück zu Plus.

In Ordnung, so funktionieren also die Dropdown-Menüs. Schauen wir uns den schmaleren Bildschirm an. Ich ändere die Ansicht hier, damit wir die Breite des Bildschirms verkleinern können, und wir reduzieren die Breite nach unten, so dass wir den netten Knopf bekommen, der das gesamte Menü öffnet und schließt. Wenn ich nun auf diesen Button klicke, öffnet sich das gesamte Menü. Klicken Sie es erneut an, es wird geschlossen. Und das funktioniert ähnlich wie das andere Skript. Du wirst sehen, wie es hier unten läuft. Wir scrollen an der ersten Sektion vorbei, kommen zur zweiten Sektion. Hier suchen wir zuerst nach einem Menü-Toggle, das ist ein Element, das die Klasse menu-toggle hat.

Das passiert zu sein, dass die Taste, die Menü ein- und ausschaltet, dann suchen wir für die Navigation auf der Website. Das wäre die eigentliche ungeordnete Liste, die Navigation selbst hat, und dann verwenden wir den gleichen Ansatz, um Arien-expandiert wahr oder falsch, und toggleClass toggleClass toggelled auf oder ab in die Hauptnavigation. Also ist das alles ziemlich unkompliziert. Der Rest des Scripts auf dieser Datei dient nur dazu, die Navigation besser zu erleichtern, es einfacher zu machen, einen Touchscreen usw. zu verwenden, so dass Sie den Rest nicht wirklich wissen müssen. Natürlich kannst du es durchlesen und herausfinden, wie es funktioniert und experimentieren, aber wenn du einfach nur die Änderungen machst, die ich dir gezeigt habe, wird alles wie erwartet funktionieren.

Natürlich gibt es noch eine winzige Kleinigkeit, die wir tun müssen. Die Knöpfe sehen ziemlich hässlich aus, also bevor ich dich loslasse, lass uns diese Knöpfe sehr schnell wechseln. Dies ist alles CSS und wir werden es in ein paar Sekunden tun. Der Grund, warum diese Buttons diese seltsamen Schattierungen hinter sich haben, liegt daran, dass die Buttons momentan von einer Datei gestylt werden, die sich in Forms befindet. Also gehen wir zu dieser Datei und setzen die Buttons einfach auf einen viel saubereren Look zurück. Ich geh in die Hosentasche, dann Formulare, dann Knöpfe.

Siehst du die ganze Beschattung? Also lasst uns das auf etwas rationaleres umstellen. Ich stelle den Rand auf zwei Pixel, durchgezogen, die Farbe des Rahmens auf schwarz, entferne den Randradius, stelle den Hintergrund auf transparent, entferne den gesamten Rahmenschatten, setze die Farbe des Textes innerhalb des Buttons auf schwarz, setze die Schriftgröße auf eins, du kannst die Zeilenhöhe so lassen, wie sie ist. Ich stelle die Polsterung auf. 5 ems und ein em, loszuwerden den Text Schatten, loszuwerden, alles für die Schwebe-Regel, und kombinieren Sie es mit dem aktiven Zustand und Fokus-Status, und dann setzen Sie den aktiven Zustand und Fokus-Status zu haben, nur einen Hintergrund, der weiß ist, und die Farbe ist schwarz.

Speichern Sie buttons. scss, gehen Sie zurück und schauen Sie noch einmal nach, und jetzt verbinden sich die Styles für die neuen Buttons wieder mit den Styles im Menü und wir haben diese netten Buttons hier. Sie sehen viel sauberer aus. Und wenn ich die Breite des Bildschirms verkleinere, sehen Sie, dass die primäre Menütaste auch viel schöner aussieht als vorher.