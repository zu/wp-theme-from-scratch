# Übersetzer Webfonts steuern lassen

Im vorherigen Film haben wir Google-Schriften zum Thema hinzugefügt, indem wir einfach das Stylesheet angefragt haben, und das ist in Ordnung, solange wir wissen, dass das Thema nur Inhalte in Englisch oder anderen lateinischen Sprachen anzeigt. Wenn es jedoch eine Möglichkeit gibt, dass ein Thema übersetzt wird, sollten wir dem Übersetzer die Möglichkeit geben, die Schrift abzuschalten, wenn sie die Zeichen in der übersetzten Sprache nicht unterstützt. Das bedeutet, dass wir einen Weg finden müssen, damit der Übersetzer die Schriftfamilien beliebig ein- und ausschalten kann, ohne selbst in die Theme-Dateien zu gehen. Das klingt kompliziert und ist es auch schon, aber wie die meisten Probleme in Wordpress hat jemand schon herausgefunden, wie man das macht.

Und weil Wordpress Open-Source ist, können Sie ihren Code ausleihen und ihn an Ihre Bedürfnisse anpassen. Tatsächlich ist dieses Prinzip, das ich während des gesamten Kurses immer wieder anwenden werde, und es ist ein Prinzip, das Sie übernehmen sollten. Wann immer Sie eine Herausforderung in einem Wordpress-Thema antreffen, sind die Chancen, dass jemand anderes bereits eine Lösung erstellt hat. Also anstatt zu versuchen, es auf eigene Faust zu lösen, finden Sie eine Lösung, die genau das tut, was Sie wollen, und ändern Sie sie dann einfach an Ihre Bedürfnisse. In unserem Fall wurde das Problem teilweise in den 21 Themen gelöst, so dass wir den Code ausleihen und ihn dann an unsere Bedürfnisse anpassen können.

Innerhalb von zwanzigzehn, in functions. php, wenn Sie nach unten scrollen, um die Enqueue-Abschnitt, und Sie werden sehen, hier, wir Enqueue den Stil, zwanzigzehn-Fonts, aber anstatt in der Schrift URL, verwenden sie diese Funktion, zwanzigzehn_fonts_url. Wenn wir also die Quelle dieser Funktion finden, indem Sie entweder Control oder Command gedrückt halten und auf den Funktionsnamen klicken, gelangen Sie zur Funktion selbst, und das ist es, was die eigentliche URL der Schriftart generiert, die wir verwenden werden. Also, kopieren Sie diese ganze Zeichenfolge hier, bis zum Ende der Funktion, und gehen Sie zu Ihrer Funktionsdatei, scrollen Sie nach oben, bis Sie das Ende von humescores_setup finden, erstellen Sie etwas Platz, fügen Sie ihn ein, und dann schnell eine Suche ersetzen für 17 ersetzen, um ihn gegen humescores zu tauschen.

Ich mache Control-h unter Windows, gebe 21 ein und ersetze es durch humescores, und klicke auf Alle ersetzen. Und jetzt können wir diese Funktion unterbrechen und sehen, was genau passiert. Zuerst erstellt humescores_fonts_url eine neue Variable namens fonts_url und setzt sie auf einen leeren String. Am unteren Ende der Funktion wird diese URL dann ausgeblendet, um sicherzustellen, dass keine Unordnung darin ist, die wir nicht brauchen, und sie an den Ort zurückgegeben, an dem wir die Funktion aufrufen. Das ist entweder nichts, wenn die Schriften deaktiviert sind, oder die URL zum richtigen Stylesheet auf Google-Schriften, wenn es eingeschaltet ist.

Um die fonts_url wirklich an die Seite anzuschließen, müssen wir sie in eine Warteschlange stellen, und wir tun das, indem wir die Funktion selbst aufrufen. Ich werde also den Namen der Funktion kopieren, zu unserem Enqueue-Abschnitt gehen und die URL zu der Schriftart, die wir hier haben, durch den Namen der Funktion ersetzen. Die Funktion läuft nun also auf Enqueue und gibt die URI an das Stylesheet von Google-Fonts aus. Wir können schnell überprüfen, um sicherzustellen, dass es immer noch funktioniert, indem wir zurück zur Website gehen und die Seitenquelle anzeigen. Scrollen Sie nach unten, und hier haben Sie wieder die URI, nur jetzt, nur dass wir Libre Franklin anstelle der Schriften, die wir eigentlich wollen, ausrichten, also müssen wir das ändern.

Der nächste Schritt innerhalb der Funktion ist die Erstellung der eigentlichen Google Fonts URI, und das in wenigen Schritten. Zuerst richtet die Funktion eine neue Variable namens font_families ein, und diese Variable enthält ein Array. Dann innerhalb des Arrays werden wir alle verschiedenen Schriftfamilien einrichten, und in diesem Fall ist es nur eine, also sagen wir hier Schriftfamilien-Array, und dann Libre Franklin, und alle verschiedenen Gewichte. So können Sie sehen, wie Sie, wenn Sie zusätzliche Schriftarten hinzufügen möchten, einfach zusätzliche Elemente zum Array hinzufügen würden. Dann richten wir eine weitere Variable ein, diesmal query_args, und richten ein Array innerhalb dieser Variablen ein, das zwei Elemente enthält, nämlich die Schriftfamilien und die Untermenge.

Für die Schriftfamilien nehmen wir jede Schriftfamilie aus dem Schriftfamilien-Array und teilen sie mit einer Pipe dazwischen auf. Das bedeutet also, wenn Sie mehrere verschiedene Familien hinzufügen, dann können Sie eine Pipe dazwischen haben, die Nomenklatur, die von der Google-Schrift verwendet wird. Danach haben wir eine Untermenge eingerichtet, und hier legen Sie fest, welche Art von Sprache Sie unterstützen möchten. Wenn du Kyrillisch wolltest, würdest du es hier hinzufügen, und so weiter und so fort und so fort und so fort. Dann holen wir uns die URL der Schriftarten, die zur Zeit leer ist, von oben, und wir nehmen den Anfang der URL von Google-Schriften, also fonts. googleapis. com/css, und wir fügen den Inhalt von den query_args an.

Und wir hängen sie nacheinander an. Am Ende haben wir also eine Font-URL, die den gesamten Code enthält, um das Stylesheet anzuzeigen. Und hier kommt der Übersetzungsteil. Sie werden feststellen, dass diese gesamte Funktion, die Google-Fonts CSS URI generiert, in eine bedingte Anweisung eingebettet ist. Und die Anweisung sagt, wenn Libre Franklin, die Variable oben hier oben, nicht gleich aus ist, dann generieren Sie die URL. Sonst nichts tun. Und so bekommen wir entweder eine vollständige URL oder eine leere URL, und ob wir die Schriftfamilie in die Warteschlange stellen können oder nicht.

Diese Variable, Libre Franklin, ist eine Variable, die nur ein Wort enthält, zur Zeit "on", und dann heißt es, Libre Franklin Schriftart an oder aus, und es beschreibt hier oben in dem Kommentar, dass Übersetzer übersetzen können, um dies zu off, würde dies automatisch toggle die gesamte Funktion aus, und wir werden nicht bekommen keine dieser Schriftarten. So funktioniert also die Funktionalität. Wir wollen jedoch, dass es mit mehreren verschiedenen Schriften funktioniert, und um das zu tun, müssen wir es aufteilen und die Logik ein wenig ändern. Das erste, was ich tun werde, ist in meine Schriften einzufügen, anstatt in die existierenden, also sage ich, wir haben nicht Libre Franklin, wir haben Source Sans Pro und PT Serif.

Dann richte ich hier zwei Variablen ein, eine für jede von ihnen. Also source_sans_pro, und ich werde einfach diese Zeile hier kopieren und eine weitere für pt_serif erstellen. Nun kann der Übersetzer jeden dieser Schriften einzeln ein- und ausschalten. Dann muss ich die Logik hier ein wenig ändern. Also erst einmal greife ich das Schriften-Familien-Array und verschiebe es außerhalb der bedingten Anweisung. Dann verwende ich diese Logik hier unten, um Schriftfamilien mit den verschiedenen Schriftfamilien bedingungsgemäß zu füllen.

Also sage ich zuerst, wenn nicht aus, Source Sans Pro, dann setze Schriftfamilien gleich, und in unserem Fall wollen wir Source Sans Pro, und wir wollen es 400,400i, 700 und 900. Das bedeutet, wenn Source Sans Pro auf on gesetzt ist, wird die Schriftfamilie mit diesem String gefüllt. Und ich werde wieder genau dasselbe tun, also kopieren Sie es einfach und fügen Sie es ein, für PT Serif, wenn PT Serif eingeschaltet ist, dann rufen wir PT Serif an, und hier wollen wir 400,400i, 700 und 700i.

Jetzt können wir in der Funktion, die die eigentliche URL generiert, die Schriftfamilien für Libre Franklin entfernen, da wir sie nicht mehr benötigen. Dann müssen wir diese bedingte Aussage ändern, um zu prüfen, ob eine dieser Bedingungen wahr ist, und wenn eine von ihnen wahr ist oder beide wahr sind, werden wir die Funktion ausführen. Wir tun das, indem wir eine etwas andere Funktion hier unten in der bedingten Anweisung benutzen. Ich sage also in_array, das heißt, wenn das Array diesen Wert in einem ihrer Einträge enthält, dann kann ich ein Array von Elementen einrichten und testen, ob eines dieser Elemente einen bestimmten Schlüssel enthält oder nicht, und dieser Schlüssel wird eingeschaltet sein, also werde ich sagen, wenn einer der folgenden Elemente den Schlüssel an hat, dann führe diese Funktion aus.

Die Elemente sind das Array von Source Sans Pro und PT Serif. Speichern Sie das, gehen Sie zurück auf die Seite, und hier sehen Sie schon, dass alle Schriften wiederverwendet wurden, d. h. es funktioniert tatsächlich. Wenn ich möchte, kann ich die Seitenquelle überprüfen, und hier sehen Sie den Aufruf von fonts. googleapis, Source Sans Pro und PT Serif. Mit dieser Funktion können Übersetzer nun entweder diese Schriften ein- oder ausschalten, und wenn Sie sie testen möchten, gehen Sie einfach in die Definitionen für Source Sans Pro oder PT Serif und ändern Sie sie von an zu aus, und Sie werden sehen, dass die beiden Schriften einzeln ausschalten.