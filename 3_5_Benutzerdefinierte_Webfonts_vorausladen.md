# Benutzerdefinierte Webfonts vorausladen

Wenn wir Google Fonts auf einer Website oder in einem Thema verwenden, fordern wir eigentlich nur ein Stylesheet, das Google automatisch generiert und dann alle Fontdateien von Google einbindet. Schauen wir uns also an, wie das eigentlich funktioniert und ob wir es verbessern können. Wenn ich irgendein Element auf der Seite inspiziere, können Sie unter berechnet sehen, dass dieses Element eine Schriftart in diesem Fall PT Serif angewendet haben wird, aber um wirklich zu sehen, was vor sich geht, müssen wir zu Quellen gehen. Von hier aus können wir alle Quellen, die derzeit im Spiel sind auf der Seite zu sehen, und das sagt mir, dass alle Dateien, die verwendet werden und wo sie leben und Sie können sehen, wir haben diese beiden Einträge Schriftart Google APIS und Schriften G statische.

Wenn ich also die Schriften Google APIs öffne, ist dies ein Stylesheet, für das wir eine URI erstellt haben, und hier im Stylesheet sehen Sie für jede der @font face Deklarationen, also z. B. PT Serif, normal, Gewicht 400, einen Aufruf zur eigentlichen Font-Datei und es ist genau hier Fonts. gstatic. com und dann PT Serif und eine ganze Menge Zeug. Was also passiert, ist für jede der Schriftarten, die wir aufrufen, der Browser muss zu fonts. gstatic. com navigieren und das korrekte Gewicht für die gesamte Schriftart herunterladen, damit sie verwendet werden kann.

Dieses ist ein wirklich arbeitsintensiver Prozess und im Moment ist die Art und Weise, wie wir es einrichten, was am Ende passiert ist, zuerst laden wir die Seite, dann kommt das Fonts Style Sheet und es sagt' oh eigentlich muss ich einiges von fonts. gstatic. com rüberbringen', also machen wir eine Menge von diesem hin und her zwischen verschiedenen Servern. Jetzt können wir die Leistung dieses ein wenig verbessern, indem wir der Seite und dem Browser nach rechts weg von der Oberseite' he erklären bilden eine Verbindung zu den fonts. gstatic. com, weil in wenig, während Sie gebeten werden werden, um Inhalt von ihm zu erhalten und Sie einen Anschluss außerdem öffnen konnten, also können Sie diesen Inhalt gerade unten ziehen. Wir werden das mit einer Funktion in Wordpress namens WP Resource Hints machen und es macht genau das, was es klingt.

Es weist den Browser darauf hin, dass es einige Ressourcen gibt, die geholt werden sollten. Wir werden uns den Kodex aus dem Jahr 2017 erneut leihen, um dies zu tun. Wenn wir über die Funktion, die die Google-Schriftart-URL generiert hat, hinaus scrollen, finden Sie eine zusätzliche Funktion namens Add Preconnect For Google Fonts. Und ich werde einfach diese gesamte Funktion kopieren, einfügen und direkt unter humescores_fonts_URL einfügen, dann werde ich wieder eine Suche ersetzen, also kontrolliere H, suche nach 2017 und suche nach humescores replace all, so dass alles für mein Thema eingestellt ist.

Und dann können wir uns kurz anschauen, wie das funktioniert. Hier fügen wir zuerst einen Filter für WP Resource Hints hinzu, so dass dies alle Ressourcenhinweise sind, die wir im Browser werfen werden. Dann rufen wir die humescores_resource_hints zurück, die eine neue benutzerdefinierte Funktion ist, die wir hier oben eingerichtet haben. Humescores_resource_hints greift alle URLs für die aktuelle Seite und den Relationstyp für sie, dann heißt es' wenn der Stil humescores_fonts ist, was der Stil ist, den wir unten in der Sektion on cues definiert haben, und wir haben preconnect auf den Relationstyp gesetzt, dann greifen wir die URL und übergeben die https://fonts.gstatic.com URL als Cross-Origin URL an die Seite.

Wenn Sie das noch nie zuvor gesehen haben, wird Ihnen das alles wie totales Kauderwelsch vorkommen, die gute Nachricht ist, dass Sie hier nichts ändern müssen. Das funktioniert einfach von der Stange, und alles was hier wirklich passiert ist, ist, dass wir sagen' hey if humescores_fonts is defined', was bedeutet, dass wir es hier unten in der on cues Sektion definiert haben, humescores_fonts, und dann dem Browser sagen,' hey es gibt diese URL, die du brauchst, um einen Port zu öffnen,' es ist hier rechts, der Browser öffnet den Port, und wenn wir das Stylesheet für das

Dies verbessert die Performance auf Ihrer Website nur geringfügig. Es ist nur eine Sache von Millisekunden, aber es macht einen Unterschied und es macht alles ein bisschen sauberer und einfacher. Und wie Sie sehen, alles, was Sie tun müssen, ist kopieren Sie den Inhalt in, speichern Sie es, und alles funktioniert einfach.